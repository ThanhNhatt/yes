<!DOCTYPE html>
<html lang="en">
<head>
     <!--Start of Fchat.vn--><script type="text/javascript" src="https://cdn.fchat.vn/assets/embed/webchat.js?id=648ffdccb673381b0b725793" async="async"></script><!--End of Fchat.vn-->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/54f0cb7e4a.js" crossorigin="anonymous"></script>
    <link rel="shortcut icon" type="images/jpg" href="images/title.jpg"/>
    <title  >  VIETSTALL</title>
    <link rel="stylesheet" type="text/css" href="style.css"> 
    <link rel="stylesheet" href="reponsive.css">
    <link rel="stylesheet" href="giohang.js">
</head>
<body style=" background-color: #fff;background-image: none;" >
    
    
    
    <div class="header">
    
            <img src="images/header5.jpg" alt="">
        
    </div>
   
  
    <nav> 
       <div class="container">
        <ul> 
            <li> <a href="./home.html"> <img src="images/logo.jpg" alt="" style="width: 150px; height: 50px;"></a></li>
            <li id="address-form"> <a href="#"> Đà Nẵng<i class="fas fa-sort-down"></i></a> </li>
            <li> <form action="" id="search-box"><input type="search" id="keyword" placeholder="Bạn muốn tìm gì..."> 
            <button id="btnSearch" type="button" onclick="search()"><i  class="fas fa-search"></i> </button> </form></li>

            <li > <a href="cart.html">  <button onclick="viewCart()"> <img src="images/icon2.jpg" style="vertical-align: middle; width: 15px; height: 15px;"></img>Giỏ Hàng</button></a></li>
            <li > <a > <button class="custom-btn btn-2 "><p style="margin-top: -5px;">Lịch Sử <br> Đơn Hàng</p></button></a></li>
            <li> <a href="">  <button class="custom-btn btn-3 "><p style="margin-top: -5px;">Thanh Toán </p></button></a></li>
            <li> <a href="./index.html">  <button class="custom-btn btn-4 "><p style="font-size: 15px;">Đăng Nhập</p></button></a></li>
           

            <div class="address-form">
                <div class="address-form-content">
                    <h2> Chọn địa chỉ nhận hàng <span id="address-close">  X Đóng </span></h2>
                    <form action=""> 
                            <p> Chọn đầy đủ địa chỉ nhận hàng để biết chính xác thời gian giao hàng</p>
                         <select name="" >
                                 <option value="#" >--Chọn địa điểm </option> 
                                 <option value="#" >Đà Nẵng </option> 
                         </select> 
                         <select name="" >
                                 <option value="#" >--Chọn Quận/Huyện </option> 
                                 <option value="#" >Đà Nẵng </option> 
                         </select> 
                         <select name="" >
                                 <option value="#" >--Chọn Phường/Xã </option> 
                                 <option value="#" >Đà Nẵng </option>         
                         </select> 
                         <input type="text" placeholder=" Số nhà, Tên đường">
                         <button> Xác Nhận</button>
                    </form>
            </div>
</div>
   
        </ul>
       </div>
    </nav>
<section class="menu-bar">
    <div class="container">
        <div class="menu-bar-content">
            <ul> 
                <li> <a href="./home.html"> <i class=" fas fa-mobile-alt"></i>Điện thoại&nbsp;<dd> </dd></a></li>
                <li> <a href="./laptop.html"> <i class=" fas fa-laptop"></i>Laptop<a></li>
                <li> <a href="./tablet.html"> <i style="margin-right: 5px;" class=" fas fa-tablet"></i>Tablet&nbsp;</a></li>
                <li> <a href="#pk"> <i class=" fas fa-city"></i>Phụ Kiện<i style="margin-left: 2px; width: 100%; position: absolute;" class="fas fa-sort-down"></i> </a>
                <div class="submenu">
                    <ul> 
                        <li> <a href=""> Chuột </a></li>
                        <li> <a href=""> Bàn Phím </a></li>
                        <li> <a href=""> Ốp Lưng </a></li>
                        <li> <a href=""> Loa </a></li>
                        <li> <a href=""> Micro </a></li>
                        <li> <a href=""> Thẻ Nhớ </a></li>
                        <li> <a href=""> Camera </a></li>
                        <li> <a href=""> Túi Chống Sốc </a></li>
                        <li> <a href=""> Webcam </a></li>
                    </ul>
                </div>
                </li>

                <li> <h4> </h4> <a href="./headphone.html"> <i style="margin-left: 10px;" class=" fas fa-headphones-alt" ></i>Headphone&nbsp;</a></li>
                <li> <a href="#dh"> <i class=" fas fa-stopwatch-20"></i>Đồng hồ&nbsp;</a></li>
        
                <li> <a  href="./giadung.html   "> Hàng Gia Dụng&nbsp;</a></li>
                <li> <a href=""> Dịch vụ tiện ích&nbsp;<i style="margin-left: 2px;" class="fas fa-sort-down"></i></a>
                    <div class="submenu">
                        <ul> 
                            <li> <a href=""> Đóng tiền điện</a></li>
                            <li> <a href=""> Thẻ cào điện thoại</a></li>
                            <li> <a href=""> Thẻ Garena </a></li>
                            <li> <a href=""> Lắp đăt Internet,Truyền hình </a></li>
                            <li> <a href=""> Vé xe, máy bay </a></li>
                            <li> <a href=""> Mua gói truyền hình </a></li>
                            <li> <a href=""> Đóng tiền trả góp </a></li>
                        </ul>
                    </div>
                </li>
               
            </ul>
        </div>
    </div>  
</section>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .cart-image {
            max-width: 80px;
            max-height: 80px;
        }

        .quantity-input {
            width: 50px;
        }

        .delete-button {
            cursor: pointer;
            color: red;
        }

        #total-amount {
            font-weight: bold;
        }
    </style>


    <table>
        <thead>
            <tr>
                <th>Ảnh</th>
                <th>Tên sản phẩm</th>
                <th>Giá</th>
                <th>Số lượng</th>
                <th></th>
            </tr>
        </thead>
        <tbody id="cart-container">
            <!-- Nội dung giỏ hàng sẽ được hiển thị ở đây -->
        </tbody>    
    </table>

    <p>Tổng số tiền: <span id="total-amount"></span></p>

    <button onclick="checkout()">Thanh Toán</button>

    <script>
        // Hàm để hiển thị giỏ hàng
      
        function displayCart() {
    // Lấy giỏ hàng từ localStorage
    var cart = localStorage.getItem('cart');

    // Kiểm tra xem giỏ hàng có dữ liệu không
    if (cart) {
        cart = JSON.parse(cart);

        // Lặp qua từng sản phẩm trong giỏ hàng và hiển thị thông tin
        var cartContainer = document.getElementById('cart-container');
        cartContainer.innerHTML = ''; // Xóa nội dung hiện tại của giỏ hàng

        for (var i = 0; i < cart.length; i++) {
            var product = cart[i];
            var cartHTML = '<tr>';
            cartHTML += '<td><img src="' + product.hinhanh + '" class="cart-image"></td>';
            cartHTML += '<td>' + product.name + '</td>';
            cartHTML += '<td class="price">' + product.price + '</td>';
            cartHTML += '<td><input type="number" min="1" value="' + product.quantity + '" class="quantity-input" onchange="updateQuantity(' + i + ', this.value)" onkeydown="return event.keyCode !== 69"></td>';
            cartHTML += '<td><span class="delete-button" onclick="removeFromCart(' + i + ')">&#10006;</span></td>';
            cartHTML += '</tr>';

            cartContainer.innerHTML += cartHTML;
        }
    } else {
        // Hiển thị thông báo nếu giỏ hàng rỗng
        var cartContainer = document.getElementById('cart-container');
        cartContainer.innerHTML = '<tr><td colspan="5">Giỏ hàng rỗng</td></tr>';
    }

    // Tính toán và hiển thị tổng số tiền
    calculateTotalAmount();
}



            // Tính toán và hiển thị tổng số tiền
       

        // Hàm để cập nhật số lượng sản phẩm trong giỏ hàng
        function updateQuantity(index, quantity) {
            // Lấy giỏ hàng từ localStorage
            var cart = localStorage.getItem('cart');

            // Kiểm tra xem giỏ hàng có dữ liệu không
            if (cart) {
                cart = JSON.parse(cart);

                // Cập nhật số lượng sản phẩm
                cart[index].quantity = parseInt(quantity);

                // Lưu lại giỏ hàng vào localStorage
                localStorage.setItem('cart', JSON.stringify(cart));

                // Tính toán và hiển thị tổng số tiền
                calculateTotalAmount();
            }
        }

        // Hàm để xóa sản phẩm khỏi giỏ hàng
        function removeFromCart(index) {
            // Lấy giỏ hàng từ localStorage
            var cart = localStorage.getItem('cart');

            // Kiểm tra xem giỏ hàng có dữ liệu không
            if (cart) {
                cart = JSON.parse(cart);

                // Xóa sản phẩm khỏi giỏ hàng
                cart.splice(index, 1);

                // Lưu lại giỏ hàng vào localStorage
                localStorage.setItem('cart', JSON.stringify(cart));

                // Hiển thị lại giỏ hàng
                displayCart();

                // Tính toán và hiển thị tổng số tiền
                calculateTotalAmount();
            }
        }

        // Hàm để tính toán tổng số tiền
        function calculateTotalAmount() {
            // Lấy giỏ hàng từ localStorage
            var cart = localStorage.getItem('cart');

            // Kiểm tra xem giỏ hàng có dữ liệu không
            if (cart) {
                cart = JSON.parse(cart);

                var totalAmount = 0;

                // Tính toán tổng số tiền của các sản phẩm trong giỏ hàng
                for (var i = 0; i < cart.length; i++) {
                    var product = cart[i];
                    var priceElement = document.getElementsByClassName('price')[i];
                    var priceText = priceElement.textContent;

                    // Loại bỏ các dấu phân tách (dấu ".") trong giá sản phẩm
                    var price = parseFloat(priceText.replace(/\./g, ''));

                    var quantity = product.quantity;
                    totalAmount += price * quantity;
                }

                // Hiển thị tổng số tiền
                var totalAmountElement = document.getElementById('total-amount');
                totalAmountElement.textContent = formatCurrency(totalAmount) + ' ';
            } else {
                // Nếu giỏ hàng rỗng, hiển thị tổng số tiền là 0
                var totalAmountElement = document.getElementById('total-amount');
                totalAmountElement.textContent = formatCurrency(0) + ' ';
            }
        }

        // Hàm để chuyển đổi số thành chuỗi có định dạng tiền tệ
        function formatCurrency(amount) {
            var formatter = new Intl.NumberFormat('vi-VN', {
                style: 'currency',
                currency: 'VND'
            });

            return formatter.format(amount);
        }

        // Hàm để thanh toán
        function checkout() {
            // Lấy giỏ hàng từ localStorage
            var cart = localStorage.getItem('cart');

            // Kiểm tra xem giỏ hàng có dữ liệu không
            if (cart) {
                cart = JSON.parse(cart);

                // Thực hiện thanh toán (ví dụ: gửi yêu cầu đến máy chủ)

                // Sau khi thanh toán thành công, xóa giỏ hàng và hiển thị thông báo
                localStorage.removeItem('cart');
                displayCart();
                alert('Thanh toán thành công!');
            }
        }

        // Hiển thị giỏ hàng khi tải trang
        displayCart();
    </script>
    <script src="giohang.js"></script>
</body>
</html>
